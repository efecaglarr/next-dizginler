"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{64382:function(e,t,r){var n=r(85893);let a=()=>(0,n.jsx)(n.Fragment,{});t.Z=a},52200:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(85893),a=r(71230),s=r(15746),i=r(56471),l=r(67294),o=r(75797),d=r(36045),c=r(10687),u=r(64382);let m=()=>{var e;let t=o.SF.useState(e=>e.inquiry),r=(0,c.Z)();return t?(0,n.jsxs)(s.Z,{xs:24,md:7,xl:4,offset:.5,className:"summary",children:[(0,n.jsxs)(a.Z,{justify:"space-between",children:[(0,n.jsx)(s.Z,{children:(0,n.jsx)("span",{className:"total-amount-title",children:r("summary.total")})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)("span",{className:"total-amount",children:(null==t?void 0:t.amountStr)||(null==t?void 0:null===(e=t.amount)||void 0===e?void 0:e.toString().concat(" ".concat(null==t?void 0:t.currency)))})})]}),(0,n.jsx)(a.Z,{children:(0,n.jsx)(s.Z,{className:"reservation-description",children:r("summary.detail")})}),(0,n.jsxs)(a.Z,{align:"bottom",justify:"space-around",className:"mt10",children:[(0,n.jsx)(s.Z,{children:(0,n.jsx)("img",{src:"/assets/icon/VerifiedbyVisa.svg"})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)("img",{src:"/assets/icon/MasterCardSecure.svg"})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)("img",{src:"/assets/icon/GuvenliOde.svg"})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)("img",{src:"/assets/icon/SafeKey.svg"})})]})]}):(0,n.jsx)(u.Z,{})};r(59303);var p=r(18508),h=r(30381),x=r.n(h),y=r(33983);let v=e=>{let{children:t,token:r,parameters:u,retryable:h=!1}=e,v=(0,c.Z)(),g=o.SF.useState(e=>e.error),S=(0,l.useRef)(),[j,f]=(0,l.useState)(0),b=()=>{var e,t;f(null===(e=null===(t=S.current)||void 0===t?void 0:t.getBoundingClientRect())||void 0===e?void 0:e.left)},A=()=>{(0,o.ow)("error",{title:v("errors.invalidState.title"),subtitle:v("errors.invalidState.subtitle")})},C=(e,t,r,n)=>{let a=x()(),s=x()(n),i=x().duration(a.diff(s));i.asHours()>24?(0,o.ow)("error",{title:v("errors.tokenNotFound.title"),subtitle:v("errors.tokenNotFound.subtitle")}):t===d.Uh.state.COMPLETED?(0,o.ow)("success",{}):410===e?(0,o.ow)("error",{title:v("errors.linkDateExpired.title"),subtitle:v("errors.linkDateExpired.subtitle")}):d.Uh.state.FAILED&&r?(0,o.ow)("error",{title:v("payment.failed.title"),subtitle:v("payment.failed.subtitle")}):(0,o.ow)("error",{title:v("payment.cancelled.title"),subtitle:v("payment.cancelled.subtitle")})},F=(e,t)=>{let{state:r,paymentType:n,paymentMethod:a,expire:s}=t;r!==d.Uh.state.INIT&&(n===d.Uh.paymentType.LINK?C(e,r,a,s):A())};return(0,l.useEffect)(()=>{window.addEventListener("resize",b),setTimeout(b,200)},[]),(0,l.useEffect)(()=>{if(!r){(0,o.ow)("error",{title:v("errors.tokenNotFound.title"),subtitle:v("errors.tokenNotFound.subtitle")});return}d._q.inquire({token:r}).then(e=>{var t,n,a,s;(0,y.Z)("info",{token:r,orderId:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.orderId,conversationId:null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.conversationId,paymentMethods:null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.paymentMethods,paymentType:null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.paymentType}),(0,o.ow)("inquiry",e.data),(0,o.ow)("paymentMethods",e.data.paymentMethods),(0,o.ow)("token",r),h||(F(e.status,e.data),d._q.land(r).catch(e=>{var t,r;if((0,y.Z)("error",{message:null==e?void 0:e.message,status:null==e?void 0:e.status}),410===e.status){(0,o.ow)("error",{title:v("errors.linkDateExpired.title"),subtitle:v("errors.linkDateExpired.subtitle")});return}let n=v("errors.api.".concat(null==e?void 0:null===(t=e.body)||void 0===t?void 0:null===(r=t.error)||void 0===r?void 0:r.code));"object"==typeof n?(0,o.ow)("error",{title:null==n?void 0:n.title,subtitle:null==n?void 0:n.subtitle}):(0,o.ow)("error",{title:v("errors.generic.title"),subtitle:v("errors.generic.subtitle")})}))}).catch(e=>{(0,y.Z)("error",{message:null==e?void 0:e.message,status:null==e?void 0:e.status}),(0,o.ow)("error",{title:v("errors.tokenNotFound.title"),subtitle:v("errors.tokenNotFound.subtitle")})})},[r,u]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{startPosition:j}),(0,n.jsxs)(a.Z,{justify:"center",className:"container",children:[(0,n.jsx)(s.Z,{xs:24,md:15,xxl:13,children:(0,n.jsx)(i.Z,{className:"payment",ref:S,children:t})}),!g&&(0,n.jsx)(m,{})]})]})};var g=v},83764:function(e,t,r){r.d(t,{Z:function(){return e1}});var n=r(85893),a=r(75797),s=r(80010),i=r(10687);let l=e=>!e||0===e.length,o=(e,t)=>l(e)||l(t)?[]:e.filter(e=>t.includes(e));var d=r(64329),c=r(64382),u=r(15746),m=r(67294);let p={EFT:"/assets/icon/EFT.png",CREDIT_CARD:"/assets/icon/CREDIT_CARD.svg",BKM_EXPRESS:"/assets/icon/BKM.svg",KLARNA:"/assets/icon/Klarna.svg",KNET:"/assets/icon/KNET.svg",IDEAL:"/assets/icon/IDEAL.svg",SOFORT:"/assets/icon/Klarna-Sofort.svg",ALIPAY:"/assets/icon/ALIPAY.svg",UNIONPAY:"/assets/icon/UnionPay.svg",SAMANBANK:"/assets/icon/SAMANBANK.png",IATAPAY:"/assets/icon/Bank.svg",APPLE_PAY:"assets/icon/APPLEPAY.png",GOOGLE_PAY:"assets/icon/GPAY.png",MILES_AND_SMILES_CARDS:"/assets/icon/MilesAndSmilesCards.svg",GIFT_CARD:"/assets/icon/GIFT-CARD.png",WALLET:"/assets/icon/tk-cuzdan.svg"};var h=e=>{let{paymentMethod:t}=e,r=a.SF.useState(e=>e.selectedPaymentMethod),s=()=>{let e=r===t?void 0:t;(0,a.ow)("selectedPaymentMethod",e),e?setTimeout(()=>{var e;return window.scrollTo({top:(null===(e=document.getElementsByClassName("payment-method-content")[0])||void 0===e?void 0:e.getBoundingClientRect().top)+window.pageYOffset-250,behavior:"smooth"})},100):window.scrollTo({top:document.getElementsByTagName("main")[0].getBoundingClientRect().top,behavior:"smooth"})};return(0,n.jsx)("div",{className:"payment-method-icon ".concat(r===t?"selected":""),onClick:s,children:(0,n.jsx)("img",{src:p[t],alt:t,className:"".concat(t)})})},x=r(71230),y=r(24819),v=r(88597),g=r(16683),S=r(15773),j=r(36045),f=r(90481),b=r(71577);let A=e=>{var t;let{label:r,disabled:s=!1,loading:l=!1,onClick:o}=e,d=(0,i.Z)(),c=a.SF.useState(e=>e.loading),m=a.SF.useState(e=>e.inquiry),p=null==m?void 0:null===(t=m.clientConfig)||void 0===t?void 0:t.buttonColor,h=()=>{(0,a.ow)("selectedPaymentMethod",void 0),(0,a.ow)("giftCard",void 0)};return(0,n.jsxs)(u.Z,{xs:24,children:[(0,n.jsx)(x.Z,{justify:"center",children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(b.Z,{className:"payment-button",type:s?"default":"primary",block:!0,disabled:s,onClick:o,loading:c||l,style:{backgroundColor:p},children:r||d("pay")})})}),(0,n.jsx)(x.Z,{justify:"center",style:{marginTop:10},children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(b.Z,{className:"cancel-alternative",type:"text",block:!0,onClick:h,children:d("cancel")})})})]})};var C=r(26713);let F=e=>{let{title:t,content:r,informationUrl:a}=e,s=(0,i.Z)();return(0,n.jsx)(x.Z,{children:(0,n.jsxs)(C.Z,{size:"middle",direction:"vertical",children:[(0,n.jsx)(u.Z,{xs:24,className:"payment-method-content-title",children:t}),(0,n.jsx)(u.Z,{xs:24,className:"notice",children:r}),a&&(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",children:s("more")})})]})})};var w=r(27049);let Z=e=>{let{text:t}=e;return(0,n.jsx)("p",{className:"notice",children:t})},E=()=>(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(w.Z,{})}),N=e=>{let{texts:t=[],wrapped:r=!0}=e;return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)(E,{}),(0,n.jsxs)(C.Z,{align:"start",direction:"vertical",size:"middle",children:[(0,n.jsx)(x.Z,{children:(0,n.jsxs)(C.Z,{align:"start",direction:"horizontal",size:"large",children:[(0,n.jsx)(u.Z,{children:(0,n.jsx)("img",{src:"/assets/icon/Attention.svg",className:"notice-icon"})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(Z,{text:t[0]})})]})}),t.length>1&&t.slice(1).map((e,t)=>(0,n.jsx)(Z,{text:e},t))]})]})},I=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.appUrl),s=async()=>{let n=(0,f.zp)(t,r).ALIPAY,a=await (0,v.Eo)(),s=()=>j.xT.initialize12({token:t,...n,clientSession:a}),i=e=>{(0,y.J0)(e.url,e.parameters,"alipay").submit()};(0,g.Y3)(s,{onSuccess:i,translation:e}).then(S.noop)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.ALIPAY"),content:e("paymentMethods.ALIPAY.headline"),informationUrl:"https://global.alipay.com/platform/site/ihome"}),(0,n.jsx)(N,{texts:e("paymentMethods.ALIPAY.notices")}),(0,n.jsx)(A,{onClick:s})]})},T=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.appUrl),s=async()=>{let n=(0,f.zp)(t,r).BKM_EXPRESS,a=await (0,v.Eo)(),s=()=>j.AP.initialize10({token:t,...n,clientSession:a}),i=e=>{(0,y.J0)(e.url,e.parameters,"bex").submit()};(0,g.Y3)(s,{onSuccess:i,translation:e}).then(S.noop)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.BKM_EXPRESS"),content:e("paymentMethods.BKM_EXPRESS.headline"),informationUrl:"https://www.bkmexpress.com.tr"}),(0,n.jsx)(N,{texts:e("paymentMethods.BKM_EXPRESS.notices")}),(0,n.jsx)(A,{onClick:s})]})};var k=r(13878),P=r(14670),M=r(32808),D=r(18433);let R=e=>{if(!e||(e=null==e?void 0:e.replace(/ /g,"")).length<14||e.length>19||/[^0-9-\s]+/.test(e))return!1;var t=0,r=0,n=!1;e=e.replace(/\D/g,"");for(var a=e.length-1;a>=0;a--){var r=parseInt(e.charAt(a),10);n&&(r*=2)>9&&(r-=9),t+=r,n=!n}return t%10==0},O=e=>!!e&&8===e.length&&/[0-9]+/.test(e),L=e=>{if(!e)return!1;let t=(e=null==e?void 0:e.replace(/[^0-9]/g,"")).substring(0,2);return 2==t.length&&(34==(t=parseInt(t))||37==t)},U=e=>e?e.replace(/[ıİiI]/g,"i").replace(/[şŞsS]/g,"s").replace(/[çÇcC]/g,"c").replace(/[ğĞgG]/g,"g").replace(/[öÖoO]/g,"o").replace(/[üÜuU]/g,"u"):e,Y=e=>{let t=[];t[0]="Unknown card type",t[1]="No card number provided",t[2]="Credit card number is in invalid format",t[3]="Credit card number is invalid",t[4]="Credit card number has an inappropriate number of digits",t[5]="Warning! This credit card number is associated with a scam attempt";let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{message:t,success:e,type:r}},n=[];if(n[0]={name:"Visa",length:"13,16",prefixes:"4",checkdigit:!0},n[1]={name:"MasterCard",length:"16",prefixes:"51,52,53,54,55",checkdigit:!0},n[2]={name:"DinersClub",length:"14,15,16",prefixes:"36,38,54,55",checkdigit:!0},n[3]={name:"CarteBlanche",length:"14",prefixes:"300,301,302,303,304,305",checkdigit:!0},n[4]={name:"AmEx",length:"15",prefixes:"34,37",checkdigit:!0},n[5]={name:"Discover",length:"16",prefixes:"6011,622,64,65",checkdigit:!0},n[6]={name:"JCB",length:"16",prefixes:"35",checkdigit:!0},n[7]={name:"enRoute",length:"15",prefixes:"2014,2149",checkdigit:!0},n[8]={name:"Solo",length:"16,18,19",prefixes:"6334,6767",checkdigit:!0},n[9]={name:"Switch",length:"16,18,19",prefixes:"4903,4905,4911,4936,564182,633110,6333,6759",checkdigit:!0},n[10]={name:"Maestro",length:"16",prefixes:"5018,5020,5038,6304,6759,6761,6762,6763",checkdigit:!0},n[11]={name:"VisaElectron",length:"16",prefixes:"4026,417500,4508,4844,4913,4917",checkdigit:!0},n[12]={name:"LaserCard",length:"16,17,18,19",prefixes:"6304,6706,6771,6709",checkdigit:!0},n[13]={name:"UATP",length:"15",prefixes:"1",checkdigit:!0},!e||0==e.length)return r(!1,t[1]);if(!R(null==(e=e.replace(/\s/g,""))?void 0:e.replace(/ /g,"")))return r(!1,t[2]);if("5490997771092064"==e)return r(!1,t[5]);let a=!1,s=!1,i="";for(let t=0;t<n.length;t++){let l=n[t].prefixes.split(",");for(let t=0;t<l.length;t++){let r=RegExp("^"+l[t]);r.test(e)&&(s=!0)}if(s){let r=n[t].length.split(",");for(let t=0;t<r.length;t++)e.length==r[t]&&(a=!0)}if(a&&s)return r(!0,null,i=n[t].name);a=!1,s=!1}return!s&&i?r(!1,t[3]):!a&&(i||e.length<16)?r(!1,t[4]):r(!0,null,i)},_=RegExp("^[\\p{L}]+(?:\\s[\\p{L}]+)*$","u"),q=e=>{let{form:t}=e,r=(0,i.Z)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(u.Z,{xs:24,lg:12,children:[(0,n.jsx)(k.Z.Item,{name:"firstName",label:r("paymentForm.cardOwner.firstName.label"),validateDebounce:1e3,wrapperCol:{sm:24},normalize:e=>{var t;return null===(t=(0,y.QM)(e))||void 0===t?void 0:t.substring(0,25)},rules:[{required:!0,message:r("paymentForm.cardOwner.firstName.validation")},{pattern:_,message:r("paymentForm.cardOwner.firstName.validation2")}],children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)(k.Z.Item,{name:"surname",wrapperCol:{sm:24},validateDebounce:1e3,label:r("paymentForm.cardOwner.surname.label"),normalize:e=>{var t;return null===(t=(0,y.QM)(e))||void 0===t?void 0:t.substring(0,25)},rules:[{required:!0,message:r("paymentForm.cardOwner.surname.validation")},{pattern:_,message:r("paymentForm.cardOwner.surname.validation2")}],children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)(k.Z.Item,{name:"email",wrapperCol:{sm:24},label:r("paymentForm.cardOwner.email.label"),normalize:e=>{var t;return null===(t=null==e?void 0:e.trim())||void 0===t?void 0:t.substring(0,50)},rules:[{type:"email",message:r("paymentForm.cardOwner.email.validation")},{required:!0,message:r("paymentForm.cardOwner.email.validation")}],children:(0,n.jsx)(D.Z,{})})]})})};var K=r(73631),B=r(62251),G=r(71064);let V=e=>{var t;let{onConfirm:r,onCancel:s,title:l="",content:o,confirmLabel:d,cancelLabel:c,maskClosable:m=!0}=e,p=(0,i.Z)(),h=a.SF.useState(e=>e.inquiry),y=null==h?void 0:null===(t=h.clientConfig)||void 0===t?void 0:t.buttonColor;return(0,n.jsx)(G.Z,{title:l,open:!0,onOk:r,onCancel:s,maskClosable:m,children:(0,n.jsxs)(x.Z,{justify:"space-around",children:[(0,n.jsx)(u.Z,{span:24,style:{textAlign:"center"},children:(0,n.jsx)("img",{src:"/assets/icon/Attention.svg",width:42})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)("p",{children:o})}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(C.Z,{align:"center",direction:"vertical",size:"small",children:[r?(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{span:24,children:(0,n.jsx)(b.Z,{className:"modal-confirm-button payment-button",block:!0,onClick:r,style:{backgroundColor:y},children:d||p("yes")})})}):null,s?(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{span:24,children:(0,n.jsx)(b.Z,{className:"modal-cancel-button",onClick:s,children:c||p("no")})})}):null]})})]})})},z=e=>{let{onConfirm:t,onCancel:r}=e,a=(0,i.Z)();return(0,n.jsx)(V,{content:a("paymentForm.currencyExchange.caption"),confirmLabel:a("paymentForm.currencyExchange.cancelLabel"),onConfirm:r})},J=e=>{let{form:t,name:r,isMobile:a,options:s,...i}=e,l=()=>{t.validateFields(["expireMonth"],()=>{}),t.getFieldValue("expireYear")&&t.validateFields(["expireYear"],()=>{})},o=e=>{let t=e.metaKey||e.ctrlKey||e.shiftKey,r=-1!=[46,8,37,38,39,40].indexOf(e.keyCode),n=!isNaN(Number(e.key)),a=e.target.value.length>1;switch(!0){case r:case!1==t&&n:case(e.metaKey||e.ctrlKey)&&-1!=["v","c","a"].indexOf(e.key):(!r||e.ctrlKey)&&a&&"a"!==e.key&&e.preventDefault();break;default:"Tab"!==e.key&&e.preventDefault()}};return a?(0,n.jsxs)("select",{id:"native-select",className:"ant-input ant-select",style:{minHeight:"3.5em",height:"50px"},onChange:e=>{var n;t.setFieldValue(r,null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value),l()},children:[(0,n.jsx)("option",{hidden:!0,disabled:!0,selected:!0}),s.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}):(0,n.jsx)(K.Z,{...i,placeholder:"",optionFilterProp:"children",className:"selectbox",showSearch:!0,onInputKeyDown:e=>o(e),onChange:e=>{t.setFieldValue(r,e),l()},children:s.map(e=>(0,n.jsx)(K.Z.Option,{value:e,children:e},e))})},W=()=>{var e;let[t,r]=(0,m.useState)(!1),n=!!(null==navigator?void 0:null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/iPhone|iPad|iPod/i));return(0,m.useEffect)(()=>{let e=void 0===window.navigator?"":navigator.userAgent;console.log("useragent",e);let t=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i);r(t)},[]),{isMobile:t,isIos:n}};var H=r(30381),X=r.n(H);let Q=new Date().getFullYear()-2e3,$=e=>{var t;let{form:r,cardAmount:s}=e,l=a.SF.useState(e=>e.appUrl),o=a.SF.useState(e=>e.saveCard),c=a.SF.useState(e=>e.creditCard),p=a.SF.useState(e=>e.token),h=a.SF.useState(e=>e.inquiry),v=a.SF.useState(e=>{try{var t;return JSON.parse(null===(t=e.inquiry)||void 0===t?void 0:t.cardHolderInformation)}catch(e){return console.log(e),null}}),{isMobile:f}=W(),[b,A]=(0,m.useState)(),C=(0,i.Z)();(0,m.useEffect)(()=>{let e=window.addEventListener("message",e=>{try{var t,r;if(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(r=t.includes)||void 0===r?void 0:r.call(t,"SessionId")){let t=JSON.parse(e.data);(0,a.ow)("creditCard.ddcReference",t.SessionId)}}catch(e){console.log("errror",e)}},!1);return()=>window.removeEventListener("message",e)},[]),(0,m.useEffect)(()=>{c.binNumber&&(A(void 0),(0,a.ow)("creditCard",{...c,ddcReference:void 0,addressRequired:!1,installments:void 0}),(0,g.Y3)(()=>j.vO.getInstallments({token:p,cardAmount:s,binNumber:c.binNumber}),{onSuccess:e=>{var t;let n={country:null==e?void 0:e.cardCountry,installments:null==e?void 0:null===(t=e.installments)||void 0===t?void 0:t.map(e=>e.installment),restrictedCardSchema:e.restrictedCardSchema,pspId:e.pspId,addressRequired:o||!!e.ddc||"TR"!==e.cardCountry||"WORLDLINE"===e.pspId,currencyExchange:"TR"===e.cardCountry&&"TRY"!==h.currency&&!1===h.disallowCurrencyExchange};e.ddc&&(sessionStorage.setItem("ddcUrl",e.ddc.url),sessionStorage.setItem("ddcJwt",e.ddc.token),sessionStorage.setItem("ddcBin",c.binNumber),A(e.ddc)),r.setFieldValue("installment",0),(0,a.ow)("creditCard",{...c,...n}),Z(e.cardType)},onFailure:S.noop,translation:C},!1).then(S.noop).catch(console.error))},[c.binNumber]),(0,m.useEffect)(()=>{v&&r.setFieldsValue({firstName:null==v?void 0:v.firstName,surname:null==v?void 0:v.lastName,email:null==v?void 0:v.email})},[v]);let F=e=>{var t;let n=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value;if(r.setFieldValue("cardNumber",(0,y.yx)(n.replace(/ /g,"")).trim().substring(0,19)),!n)return;let s=n.replace(/ /g,"");(O(s)||R(s))&&(0,a.ow)("creditCard.binNumber",s.substring(0,8)),(0,a.ow)("creditCard.isAmex",L(s))},w=()=>{r.setFieldValue("cardNumber",""),r.setFieldValue("cvc",""),r.setFieldValue("expireMonth",""),r.setFieldValue("expireYear",""),(0,a.ow)("creditCard.binNumber",""),(0,a.ow)("creditCard.currencyExchange",!1)},Z=e=>{let t=!1;"UATP"===e||"BANCONTACT"===e?r.setFields([{name:"cvc",value:"",errors:[]}]):t=!0,(0,a.ow)("creditCard.cvcRequired",t)},E=()=>{let e=r.getFieldValue("cardNumber");Y(e=null==e?void 0:e.replace(/ /g,"")).success||r.setFields([{name:"cardNumber",errors:[C("paymentForm.creditCard.cardNumber.validation")]}])};return(0,n.jsxs)(u.Z,{xs:24,lg:12,children:[b&&(0,n.jsx)(B.Z,{width:"1px",height:"1px",display:"none",url:l+"/ddc.html"}),(0,n.jsx)(k.Z.Item,{name:"cardNumber",required:!0,wrapperCol:{sm:24},label:C("paymentForm.creditCard.cardNumber.label"),rules:[{message:C("paymentForm.creditCard.cardNumber.validation"),validator:(e,t)=>{let n=r.getFieldValue("cardNumber");return Y(n=null==n?void 0:n.replace(/ /g,"")).success?Promise.resolve():Promise.reject()},validateTrigger:"onSubmit"}],children:(0,n.jsx)(D.Z,{onChange:F,onBlur:E,pattern:"[0-9]*",inputMode:"numeric"})}),(0,n.jsxs)(x.Z,{gutter:8,align:"bottom",children:[(0,n.jsxs)(u.Z,{xs:14,children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{xs:24,className:"ant-form-item-label ",children:(0,n.jsx)("label",{className:"ant-form-item-required",children:C("paymentForm.creditCard.expiryDate.label")})})}),(0,n.jsxs)(x.Z,{gutter:8,children:[(0,n.jsx)(u.Z,{xs:12,children:(0,n.jsx)(k.Z.Item,{name:"expireMonth",wrapperCol:{xs:24},rules:[{required:!0,message:C("paymentForm.creditCard.expiryDate.validation")},{validator:(e,t)=>Q===parseInt(r.getFieldValue("expireYear"))&&r.getFieldValue("expireMonth")<=X()().month()?Promise.reject(C("paymentForm.creditCard.expiryDate.validation")):Promise.resolve()}],children:(0,n.jsx)(J,{notFoundContent:C("paymentForm.creditCard.expiryDate.validation"),isMobile:f,form:r,name:"expireMonth",options:[...Array(12).keys()].map(e=>(e+1).toString().padStart(2,"0"))})})}),(0,n.jsx)(u.Z,{xs:12,children:(0,n.jsx)(k.Z.Item,{name:"expireYear",wrapperCol:{xs:24},rules:[{required:!0,message:C("paymentForm.creditCard.expiryDate.validation")},{validator:(e,t)=>Q===parseInt(r.getFieldValue("expireYear"))&&r.getFieldValue("expireMonth")<=X()().month()?Promise.reject(C("paymentForm.creditCard.expiryDate.validation")):Promise.resolve()}],children:(0,n.jsx)(J,{notFoundContent:C("paymentForm.creditCard.expiryDate.validation"),isMobile:f,form:r,name:"expireYear",options:[...Array(15).keys()].map(e=>e+Q)})})})]})]}),(0,n.jsx)(u.Z,{xs:10,offset:0,children:(0,n.jsx)(k.Z.Item,{name:"cvc",wrapperCol:{xs:24},label:C("paymentForm.creditCard.cvc.label"),rules:[{required:c.cvcRequired,message:C("paymentForm.creditCard.cvc.validation")},{pattern:c.isAmex?RegExp("[0-9]{4,4}"):RegExp("[0-9]{3,3}"),message:C("paymentForm.creditCard.cvc.validation")}],validateTrigger:"onChange",children:(0,n.jsx)(D.Z,{disabled:!c.cvcRequired,onChange:e=>{var t,n;r.setFieldValue("cvc",(0,y.IZ)(null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(n=t.value)||void 0===n?void 0:n.replace(/ /g,"").trim().substring(0,c.isAmex?4:3)))},pattern:"[0-9]*",inputMode:"numeric"})})}),(0,n.jsxs)(u.Z,{xs:12,children:[(0,n.jsx)(k.Z.Item,{name:"installment",wrapperCol:{xs:22},label:C("paymentForm.creditCard.installment.label"),children:(0,n.jsxs)(K.Z,{showSearch:!0,placeholder:"",optionFilterProp:"children",className:"selectbox",disabled:!c.installments||0===c.installments.length,defaultValue:0,onChange:e=>{r.setFieldValue("installment",e)},children:[(0,n.jsx)(K.Z,{value:0,children:C("paymentForm.creditCard.installment1")}),c.installments&&c.installments.length>0&&c.installments.map(e=>(0,n.jsx)(K.Z.Option,{value:e,children:e},e))]})}),(null==c?void 0:c.currencyExchange)&&(null==h?void 0:null===(t=h.clientConfig)||void 0===t?void 0:t.mismatchCurrencyBehavior)===d.Bi.EXCHANGE&&(0,n.jsx)(z,{onConfirm:()=>{(0,a.ow)("currencyExchange",!0),(0,g.Y3)(()=>j._q.exchangeCurrency(p),{translation:C},!1).then(S.noop)},onCancel:w})]})]})]})};var ee=r(8308);let et=e=>{let{onConfirm:t}=e,r=(0,i.Z)(),s=()=>{(0,a.ow)("error",{title:r("errors.generic.title"),subtitle:r("errors.generic.subtitle")})};return(0,n.jsx)(V,{content:r("paymentForm.cardSubmission"),onCancel:s,onConfirm:t})};var er=r(62986),en=r(14104),ea=r(19010),es=function(e){let{key:t,refreshDependencies:r=[],throwError:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{key:void 0,refreshDependencies:[],throwError:!1},[s,l]=(0,m.useState)(),[o,d]=(0,m.useState)(!0),[c,u]=(0,m.useState)(null),p=(0,i.Z)(),h=e=>{d(e),(0,a.K4)(e)},x=(0,m.useCallback)(()=>{h(!0),e().then(e=>{if(!1===e.success){if(u(e.error),n){var r;(0,a.ow)("error",(r=e.error)&&r.code&&(null==ea?void 0:ea.errors[r.code])?p("errors.api.".concat(r.code)):p("errors.api.default"))}return}l(e.data),t&&a.SF.update(r=>{r[t]=e.data})}).catch(e=>{u(e),console.log(e)}).finally(()=>{h(!1)})},[e,t]);return(0,m.useEffect)(()=>{x()},[...r]),{data:s,error:c,isLoading:o,refresh:x}},ei=r(18188);let el=e=>{let{form:t,saveCard:r}=e,s=(0,i.Z)(),[l,o]=(0,m.useState)(0),[d,c]=(0,m.useState)(!0),p=a.SF.useState(e=>{var t;return null==e?void 0:null===(t=e.inquiry)||void 0===t?void 0:t.language}),h=a.SF.useState(e=>{var t;return null==e?void 0:null===(t=e.inquiry)||void 0===t?void 0:t.originCountry}),v=a.SF.useState(e=>{var t;return null==e?void 0:null===(t=e.cardInfo)||void 0===t?void 0:t.cardCountry}),{data:g}=es(()=>ei.C.getCountries(p)),{data:S}=es(()=>ei.C.getStates(l),{refreshDependencies:[l]}),j=()=>{if(void 0!==t.getFieldValue("country")){let e=JSON.parse(t.getFieldValue("country")),{hasState:r}=e;return r}return!0};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{children:(0,n.jsx)("div",{className:"payment-method-content-subtitle",children:s("paymentForm.address.caption")})})}),(0,n.jsxs)(x.Z,{gutter:{xs:0,lg:60},children:[(0,n.jsxs)(u.Z,{xs:24,lg:12,children:[(0,n.jsx)(k.Z.Item,{name:"country",wrapperCol:{sm:24},label:s("paymentForm.address.country.label"),rules:[{type:"string",message:s("paymentForm.address.country.validation")},{required:!0,message:s("paymentForm.address.country.validation")}],children:(0,n.jsx)(K.Z,{showSearch:!0,placeholder:"",notFoundContent:(0,n.jsx)(er.Z,{image:er.Z.PRESENTED_IMAGE_SIMPLE,description:s("notFound",{$keyword:s("paymentForm.address.country.label")})}),optionFilterProp:"children",className:"selectbox",filterOption:(e,t)=>{var r,n,a;return(null===(r=U(t.children))||void 0===r?void 0:r.toLowerCase().includes(U(e.toLowerCase())))||(null===(n=JSON.parse(null==t?void 0:t.value))||void 0===n?void 0:null===(a=n.code)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))},onChange:e=>{let r=JSON.parse(e);o(r.id),c(r.hasState),t.setFieldValue("state",null)},children:g&&g.map(e=>({...e,name:"TR"!==e.code?new Intl.DisplayNames([p||"en"],{type:"region"}).of(e.code):"T\xfcrkiye"})).sort((e,t)=>h===e.code?-1:h===t.code?1:e.name.localeCompare(t.name)).map(e=>(0,n.jsx)(K.Z.Option,{value:JSON.stringify(e),children:e.name},e.id))})}),(0,n.jsx)(k.Z.Item,{name:"state",wrapperCol:{sm:24},label:s("paymentForm.address.state.label"),normalize:e=>{var t;return null===(t=(0,y.Tg)(e))||void 0===t?void 0:t.substring(0,25)},rules:[{required:j(),message:s("paymentForm.address.state.validation")}],children:d?(0,n.jsx)(K.Z,{showSearch:!0,placeholder:"",notFoundContent:(0,n.jsx)(er.Z,{image:er.Z.PRESENTED_IMAGE_SIMPLE,description:s("notFound",{$keyword:s("paymentForm.address.state.label")})}),optionFilterProp:"children",className:"selectbox",filterOption:(e,t)=>{var r;return null===(r=t.children)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase())},children:S&&S.map(e=>(0,n.jsx)(K.Z.Option,{value:e.name,children:e.name},e.id))}):(0,n.jsx)(D.Z,{})}),(0,n.jsx)(k.Z.Item,{name:"city",wrapperCol:{sm:24},label:s("paymentForm.address.city.label"),normalize:e=>{var t;return null===(t=(0,y.Tg)(e))||void 0===t?void 0:t.substring(0,45)},rules:[{type:"string",message:s("paymentForm.address.city.validation")},{required:!0,message:s("paymentForm.address.city.validation")}],children:(0,n.jsx)(D.Z,{})})]}),(0,n.jsxs)(u.Z,{xs:24,lg:12,children:[(0,n.jsx)(k.Z.Item,{name:"postalCode",wrapperCol:{sm:24},label:s("paymentForm.address.postalCode.label"),normalize:e=>{var t;return null===(t=(0,y.eV)(e))||void 0===t?void 0:t.substring(0,10)},rules:[{required:r||j(),message:s("paymentForm.address.postalCode.validation")}],children:(0,n.jsx)(D.Z,{})}),(0,n.jsx)(k.Z.Item,{name:"streetAddressA",wrapperCol:{sm:24},label:s("paymentForm.address.streetAddressA.label"),normalize:e=>{var t;return null===(t=(0,y.Tg)(e))||void 0===t?void 0:t.substring(0,90)},rules:[{type:"string",message:s("paymentForm.address.streetAddressA.validation")},{required:!0,message:s("paymentForm.address.streetAddressA.validation")},{max:90,message:s("paymentForm.address.streetAddressA.validation2")}],children:(0,n.jsx)(en.Z,{style:{minHeight:155}})})]}),"BR"===v&&(0,n.jsx)(u.Z,{xs:24,lg:12,children:(0,n.jsx)(k.Z.Item,{name:"taxId",wrapperCol:{sm:24},label:s("paymentForm.address.taxId.label"),normalize:e=>(0,y.eV)(e),rules:[{required:!0,message:s("paymentForm.address.taxId.validation")}],children:(0,n.jsx)(D.Z,{})})})]})]})};class eo{getName(){return this.name}getUrl(){return this.url}static getValues(){return[this.VISA,this.AMEX,this.MASTER_CARD,this.MAESTRO,this.UATP,this.TROY,this.VISA_ELECTRON,this.DINERS_CLUB,this.JCB,this.DISCOVER,this.BANCONTACT]}constructor(e,t){this.name=e,this.url=t}}eo.VISA=new eo("VISA","/assets/icon/Visa.svg"),eo.AMEX=new eo("AMEX","/assets/icon/AmericanExpress.svg"),eo.MASTER_CARD=new eo("MASTER_CARD","/assets/icon/MasterCard.svg"),eo.MAESTRO=new eo("MAESTRO","/assets/icon/Maestro-Group.svg"),eo.UATP=new eo("UATP","/assets/icon/UATP-Group.svg"),eo.TROY=new eo("TROY","/assets/icon/Troy-Group.svg"),eo.VISA_ELECTRON=new eo("VISA_ELECTRON","/assets/icon/VisaElectron-Group.svg"),eo.DINERS_CLUB=new eo("DINERS_CLUB","/assets/icon/DinersGroup-Group.svg"),eo.JCB=new eo("JCB","/assets/icon/JCB-Group.svg"),eo.DISCOVER=new eo("DISCOVER","/assets/icon/DiscoverCard-Group.svg"),eo.BANCONTACT=new eo("BANCONTACT","/assets/icon/Bancontact-Group.svg"),eo.CARTEBLEUE=new eo("CARTEBLEUE","/assets/icon/CarteBleue.svg"),eo.POSTEPAY=new eo("POSTEPAY","/assets/icon/PostePay.png");let ed=e=>{let{cardLogos:t}=e;return t||(t=["MASTER_CARD","VISA","MAESTRO","VISA_ELECTRON","TROY","AMEX","UATP"]),(0,n.jsx)("div",{className:"card-schema-container",children:t.map((e,t)=>eo[e]?(0,n.jsx)("img",{src:eo[e].getUrl()},t):null)})},ec=e=>{var t;let{onConfirm:r,title:s="",content:l,confirmLabel:o}=e,d=(0,i.Z)(),c=a.SF.useState(e=>e.inquiry),m=null==c?void 0:null===(t=c.clientConfig)||void 0===t?void 0:t.buttonColor;return(0,n.jsx)(G.Z,{title:s,open:!0,onOk:r,children:(0,n.jsxs)(x.Z,{justify:"space-around",children:[(0,n.jsx)(u.Z,{span:24,style:{textAlign:"center"},children:(0,n.jsx)("img",{src:"/assets/icon/Attention.svg",width:42})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)("p",{children:l})}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(C.Z,{align:"center",direction:"vertical",size:"small",children:(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{span:24,children:(0,n.jsx)(b.Z,{className:"modal-confirm-button payment-button",block:!0,style:{backgroundColor:m},onClick:r,children:o||d("confirm")})})})})})]})})},eu=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.retryableError),s=()=>{(0,g.Y3)(()=>j._q.retry(t),{onSuccess:e=>{(0,a.ow)("inquiry",e),(0,a.ow)("retryableError",void 0)},translation:e},!1).then(S.noop)};return r?(0,n.jsx)(ec,{content:e("errors.api.".concat(r,".subtitle")),onConfirm:s,confirmLabel:e("ok")}):(0,n.jsx)(c.Z,{})},em=e=>{let{onConfirm:t,onCancel:r}=e,a=(0,i.Z)();return(0,n.jsx)(V,{content:a("paymentForm.threeDOption"),onCancel:t,onConfirm:r,maskClosable:!1})},ep=async(e,t)=>{if(e)try{(0,a.K4)(!0),await e()}catch(e){}finally{(0,a.ow)("success",{url:null==t?void 0:t.redirectionUrl,data:t}),(0,a.ow)("language",null==t?void 0:t.language),(0,a.K4)(!1)}};var eh=r(6901);let ex=[{title:"Card Number",dataIndex:"cardNumber",responsive:["lg"]},{title:"Expiration Date",dataIndex:"expire",responsive:["md"]},{title:"Card Balance",dataIndex:"balance"},{title:"Total Payment Amount",dataIndex:"total"},{title:"Additional Payment Amount",dataIndex:"additional"}];function ey(e,t){let r=d.YX[t];return e.toFixed(2).concat(" ").concat(r)}var ev=()=>{let e=a.SF.useState(e=>e.giftCard),t=a.SF.useState(e=>e.inquiry);if(!e)return(0,n.jsx)(n.Fragment,{});let r=[e].map((e,r)=>{let n=t.amount-e.balance;return{key:r,cardNumber:e.cardNumber,expire:X()(e.expireDate).format("DD-MM-YYYY"),balance:ey(e.balance,e.currency),total:ey(t.amount,e.currency),additional:n>0?ey(n,e.currency):"-"}});return(0,n.jsx)(eh.Z,{columns:ex,dataSource:r,size:"middle",pagination:!1,showHeader:!0})};let eg=(e,t)=>{let r=()=>{(0,g.Y3)(()=>j.CG.auth1(e),{translation:t}).then(S.noop)};(0,g.Y3)(()=>j.CG.initialize9(e),{onSuccess:r,onFailure:console.error,translation:t}).then(S.noop)},eS=async(e,t,r)=>{var n;let a=e.getFieldsValue(),s=a.country&&JSON.parse(a.country).code,i=t.addressRequired?{streetAddressA:a.streetAddressA,city:a.city,state:a.state,postalCode:a.postalCode,countryCode:s,countryISO3166numeric:s,..."BR"===t.cardCountry&&{taxId:a.taxId}}:null;return{card:a.cardNumber?{cardOwnerName:a.surname,cardNumber:a.cardNumber.replace(/ /g,""),expireYear:null===(n=a.expireYear)||void 0===n?void 0:n.toString(),expireMonth:a.expireMonth,cvc:t.cvcRequired?a.cvc:"000"}:null,address:i,user:a.firstName?{name:a.firstName,surname:a.surname,email:a.email,phoneNumber:a.phoneNumber}:null,clientSession:{..."NUVEI"===t.pspId&&{colorDepth:15,timezoneOffSet:140},...await (0,v.Eo)(),ddcReference:t.ddcReference},installment:a.installment||0,token:r}};var ej=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.appUrl),n=a.SF.useState(e=>e.creditCard),s=a.SF.useState(e=>{var t;return null===(t=e.creditCard)||void 0===t?void 0:t.pspId}),l=a.SF.useState(e=>e.selectedPaymentMethod),[o,c]=(0,m.useState)(),[u,p]=(0,m.useState)(),[h,x]=(0,m.useState)(),[v,S]=(0,m.useState)(!1),[b,A]=(0,m.useState)(),[C,F]=(0,m.useState)(),w=async a=>{let i=await eS(a,n,t),l=(0,f.zp)(t,r).CREDIT_CARD,o={};"WORLDLINE"===s&&(o={pendingUrl:l.successUrl,errorUrl:l.successUrl,cancelledUrl:l.successUrl}),"NUVEI"===s&&(o={pendingUrl:l.successUrl,errorUrl:l.successUrl,notificationUrl:l.successUrl});let d=Z(i,l,o);await (0,g.Y3)(d,{translation:e,onSuccess:e=>{c(i);let t=e.cardSubmission===j.j4.cardSubmission.MANDATORY,r=e.threeDSecureNecessity===j.j4.threeDSecureNecessity.MANDATORY;if(F(t),e.threeDSecureParams){let t=e.threeDSecureParams;if("WORLDLINE"===s&&!t.redirectUrl||"NUVEI"===s&&("false"===t.v2supported||"frictionless"===t.method||"exemption"===t.method)){x(ee.pJ.NOT_ALLOWED),p(e.cardToken);return}"NUVEI"===s?A((0,y.J0)(t.acsUrl,t,"threeDForm")):A((0,y.J0)(e.channelUrl,t,"threeDForm")),x(r?ee.pJ.REQUIRED:ee.pJ.OPTIONAL)}else h==ee.pJ.NOT_ALLOWED&&S(e=>!e),x(ee.pJ.NOT_ALLOWED);p(e.cardToken)}},!1)},Z=(e,t,r)=>l===d.A6.WALLET?()=>j.UV.initialize({...e,successUrl:t.successUrl,failureUrl:t.failureUrl,threeDSecureParams:r}):()=>j.zZ.initialize3({...e,successUrl:t.successUrl,failureUrl:t.failureUrl,threeDSecureParams:r}),E=()=>h===ee.pJ.REQUIRED;return{invokable:{isTdsRequired:E,makeInitRequest:w,makeThreeDSecureValidation:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={...o,...t};return(r.card.cardNumber=u,E())?((0,a.K4)(!0),r.paymentMethod=e,(0,ee.L0)(r),b.submit(),{tds:!0,request:r}):{tds:!1,request:r}}},tdsStatus:h,setTdsStatus:x,retryTdsStatus:v,cardSubmission:C,setCardSubmission:F}};let ef={wrapperCol:{xs:{span:18},sm:{span:18}}},eb=()=>{let[e]=k.Z.useForm(),t=(0,i.Z)(),r=a.SF.useState(e=>e.retryableError),s=a.SF.useState(e=>e.creditCard.addressRequired),l=a.SF.useState(e=>{var t;return null===(t=e.inquiry)||void 0===t?void 0:t.cardLogos}),o=a.SF.useState(e=>e.creditCard.restrictedCardSchema),[c,p]=(0,m.useState)(!1),h=a.SF.useState(e=>e.retryableError),y=a.SF.useState(e=>{var t;return null===(t=e.inquiry)||void 0===t?void 0:t.clientId}),v=a.SF.useState(e=>{var t;return null===(t=e.inquiry)||void 0===t?void 0:t.isAjet}),[f,b]=(0,m.useState)(),{isMobile:C,isIos:F}=W(),w=a.SF.useState(e=>e.giftCard),Z=a.SF.useState(e=>e.remainingAmountDueToGiftCard),E=w&&Z>0,I=a.SF.useState(e=>e.milesAndSmilesRegisteredCards),T=a.SF.useState(e=>e.saveCard),{invokable:{makeInitRequest:D,makeThreeDSecureValidation:R},tdsStatus:O,setTdsStatus:L,retryTdsStatus:U,cardSubmission:Y,setCardSubmission:_}=ej(),K=y===d.XL.AVIATION_ACADEMY;function B(e){var t,r=(null===(t=document.getElementsByClassName("summary")[0])||void 0===t?void 0:t.clientTop)||0;if(null==e?void 0:e.offsetParent){do r+=e.offsetTop-30;while(e=e.offsetParent);return[r]}}let G=e=>{var t;C&&(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.id)&&window.scrollTo({top:B(document.getElementById(e.target.id)),behavior:"smooth"})},V=()=>{let e=document.getElementById("restricted-card-notice");window.scrollTo({top:B(e)-(null==e?void 0:e.clientHeight),behavior:"smooth"}),document.getElementById("creditCard_cardNumber").blur()};(0,m.useEffect)(()=>{T&&(null==I?void 0:I.length)<3&&(0,a.ow)("addressRequired",!0)},[T]),(0,m.useEffect)(()=>{(0,a.ow)("addressRequired",!1),(0,a.ow)("saveCard",!1)},[]),(0,m.useEffect)(()=>{h&&e.resetFields(["cardNumber","expireMonth","expireYear","cvc","country","streetAddressA"])},[h]),(0,m.useEffect)(()=>{o&&V()},[o]),(0,m.useEffect)(()=>{if(void 0!==Y&&void 0!==O&&!0!==Y){if(O===ee.pJ.OPTIONAL){b(!0);return}Q()}},[Y,O,U]);let z=()=>p(!c),J=()=>{(0,a.ow)("addressRequired",!T),(0,a.ow)("saveCard",!T)},H=async()=>{await e.validateFields(),D(e).then(S.noop)},X=async(e,t)=>{e.card&&(delete e.card.cvc,e.card.isPrimaryPayment=!0),ep(()=>j.PK.addCard(e),t).then(S.noop)},Q=()=>{let e;let r=d.A6.CREDIT_CARD;E&&(r=d.A6.GIFT_CARD,e={cardNumber:w.cardNumber,pin:w.pin});let n=R(r,e);if(E&&j.CG.initialize9(n.request),!n.tds){if(E){eg(n.request,t);return}(0,g.Y3)(()=>j.AD.auth({...n.request}),{onSuccess:T?e=>X(n.request,e):null,translation:t},!1).then(S.noop)}},er=v||K?!o&&c&&!r:!o&&!r;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.Z,{className:"payment-method-content-title",children:[(0,n.jsx)("span",{children:t("paymentGroups.CREDIT_CARD")}),(0,n.jsx)(ed,{cardLogos:l})]}),(0,n.jsx)(u.Z,{xs:24,xl:0,children:(0,n.jsx)(ed,{cardLogos:l})}),w&&Z>0&&(0,n.jsxs)(u.Z,{xs:24,children:[(0,n.jsx)("h3",{children:"Gift Cards"}),(0,n.jsx)(ev,{})]}),(0,n.jsxs)(k.Z,{form:e,name:"creditCard",onFinish:H,...ef,scrollToFirstError:!0,layout:"vertical",onFocusCapture:e=>F?S.noop:G(e),children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{children:(0,n.jsx)("div",{className:"payment-method-content-subtitle",children:t("paymentForm.cardOwner.caption")})})}),(0,n.jsxs)(x.Z,{gutter:{xs:0,lg:60},children:[(0,n.jsx)(q,{form:e}),(0,n.jsx)($,{form:e})]}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{xs:24}),(0,n.jsx)("div",{id:"restricted-card-notice",children:(0,n.jsx)(P.Z,{message:(0,n.jsx)(N,{wrapped:!1,texts:[o.concat(t("paymentForm.creditCard.cardSchemaRestriction"))]}),type:"error"})})]}),(0,n.jsx)(x.Z,{gutter:{xs:0,lg:60},children:s&&(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(el,{form:e,saveCard:T})})})]}),(0,n.jsx)(N,{texts:t("paymentMethods.CREDIT_CARD.notices")}),(null==I?void 0:I.length)<3&&(0,n.jsx)(x.Z,{style:{marginBottom:"10px"},children:(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(M.Z,{checked:T,onClick:J,children:(0,n.jsxs)("div",{className:"terms",children:[t("paymentForm.registerToMilesAndSmiles.prefix"),t("paymentForm.registerToMilesAndSmiles.suffix")]})})})}),(0,n.jsx)(x.Z,{children:(0,n.jsxs)(u.Z,{xs:24,children:[v?(0,n.jsx)(M.Z,{checked:c,onClick:z,children:(0,n.jsxs)("div",{className:"terms",children:[t("paymentForm.terms.prefix"),(0,n.jsx)("a",{href:t("paymentForm.terms.link"),target:"_blank",rel:"noopener noreferrer",children:t("paymentForm.terms.linkText")}),t("paymentForm.terms.suffix")]})}):null,K?(0,n.jsx)(M.Z,{checked:c,onClick:z,children:(0,n.jsxs)("div",{className:"terms",children:[t("paymentForm.aviationAcademyTerms.prefix"),(0,n.jsx)("a",{href:t("paymentForm.aviationAcademyTerms.link"),target:"_blank",rel:"noopener noreferrer",children:t("paymentForm.aviationAcademyTerms.linkText")}),t("paymentForm.aviationAcademyTerms.suffix")]})}):null]})}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:er?e.submit:S.noop,disabled:!er})})}),Y&&(0,n.jsx)(et,{onConfirm:()=>_(!1)}),f&&(0,n.jsx)(em,{onCancel:()=>{L(ee.pJ.NOT_ALLOWED),b(!1)},onConfirm:()=>{L(ee.pJ.REQUIRED),b(!1)}}),(0,n.jsx)(eu,{})]})};var eA=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.inquiry),r=()=>{j.hk.save(t.token).then(e=>{(0,a.ow)("success",{url:e.data.redirectionUrl,data:e.data})})};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(N,{texts:[e("paymentMethods.EFT.headline")],wrapped:!1}),(0,n.jsx)(N,{texts:e("paymentMethods.EFT.notices"),wrapped:!1}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:r})})]})};let eC=e=>{let t=(0,i.Z)(),r=a.SF.useState(e=>e.token),s=a.SF.useState(e=>e.appUrl),l=async()=>{let e=(0,f.zp)(r,s).IDEAL,n=await (0,v.Eo)(),a=()=>j.Y4.initialize6({token:r,...e,clientSession:n}),i=e=>{(0,y.J0)(e.url,e.parameters,"ideal").submit()};(0,g.Y3)(a,{onSuccess:i,translation:t}).then(S.noop)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:t("paymentGroups.IDEAL"),content:t("paymentMethods.IDEAL.headline"),informationUrl:"https://www.ideal.nl/"}),(0,n.jsx)(N,{texts:t("paymentMethods.IDEAL.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:l})})]})};var eF=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.inquiry),[s,l]=(0,m.useState)(),[o,d]=(0,m.useState)(!1),[c,p]=(0,m.useState)({}),h=e&&e("paymentMethods.KLARNA.countries");(0,m.useEffect)(()=>{s&&y().then(S.noop)},[s]);let y=async()=>{let r=await (0,v.Eo)(),n=async e=>{p(e.parameters),Klarna.Credit.init({client_token:e.clientToken}),(0,a.K4)(!0),setTimeout(()=>(0,a.K4)(!1),1e3),Klarna.Credit.load({container:"#klarna_container",options:{color_details:"#2e8ffd",color_button:"#E81932",color_border_selected:"#2e8ffd"}}),d(!0)};(0,g.Y3)(()=>j.AM.initialize5({token:t,country:s,clientSession:r}),{onSuccess:n,translation:e}).then(S.noop)},f=async()=>{d(!1);try{let r=await (0,v.Eo)();Klarna.Credit.authorize(c,function(n){if(console.warn(n),!n.approved){l(void 0),d(!1);return}let a=()=>j.AM.complete5({token:t,country:s,approved:n.approved,authorizationToken:n.authorization_token,clientSession:r});(0,g.Y3)(a,{translation:e})})}catch(e){console.error("error occurred",e)}},b=e=>{console.log("currency",e);let t=[];switch(r.currency){case"EUR":t=["AT","FI","DE"];break;case"GBP":t=["GB"];break;case"USD":t=["AS","US"];break;case"NOK":t=["NO"];break;case"DKK":t=["DK"];break;case"SEK":t=["SE"];break;default:t=[]}return null!=t&&!!t.includes(e)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(C.Z,{direction:"vertical",size:"large",children:[(0,n.jsx)(F,{title:e("paymentGroups.KLARNA"),content:e("paymentMethods.KLARNA.headline"),informationUrl:"https://www.klarna.com/international/"}),(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(u.Z,{xs:22,offset:2,children:(0,n.jsx)(k.Z,{layout:"vertical",children:(0,n.jsx)(k.Z.Item,{name:"country",label:e("paymentForm.country"),rules:[{message:e("paymentMethods.KLARNA.country.validation"),validator:(t,r)=>b(r)?Promise.resolve():Promise.reject(e("KLARNA.country.validation"))},{required:!0,message:e("paymentForm.address.country.validation")}],children:(0,n.jsx)(K.Z,{value:s,style:{width:"50%"},onChange:e=>b(e)?l(e):l(void 0),disabled:!!s,options:h&&Object.keys(h).filter(e=>"AS"!=e||(null==r?void 0:r.currency)!=="USD").map(e=>({value:e,label:h[e]}))})})})}),s&&(0,n.jsx)(u.Z,{xs:22,offset:2,children:(0,n.jsx)("div",{id:"klarna_container"})})]})]}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:o?f:S.noop,disabled:!o})})})]})};let ew=e=>{let t=(0,i.Z)(),r=a.SF.useState(e=>e.token),s=a.SF.useState(e=>e.appUrl),l=async()=>{let e=(0,f.zp)(r,s).KNET,n=await (0,v.Eo)(),a=()=>j.WG.initialize4({token:r,...e,clientSession:n}),i=e=>{(0,y.J0)(e.url,e.parameters,"knet").submit()};(0,g.Y3)(a,{onSuccess:i,translation:t}).then(S.noop)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:t("paymentGroups.KNET"),content:t("paymentMethods.KNET.headline"),informationUrl:"https://www.knetpay.com.kw/"}),(0,n.jsx)(N,{texts:t("paymentMethods.KNET.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:l})})]})},eZ=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),[r,s]=(0,m.useState)(),l=a.SF.useState(e=>e.appUrl),o=e&&e("paymentMethods.SOFORT.countries"),d=async()=>{let n=(0,f.zp)(t,l).SOFORT,a=await (0,v.Eo)(),s=()=>j.rw.initialize1({token:t,country:r,...n,clientSession:a}),i=e=>{(0,y.J0)(e.url,e.parameters,"sofort").submit()};(0,g.Y3)(s,{onSuccess:i,translation:e}).then(S.noop)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.SOFORT"),content:e("paymentMethods.SOFORT.headline"),informationUrl:"https://www.klarna.com/international/"}),(0,n.jsx)(N,{texts:e("paymentMethods.SOFORT.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(k.Z,{layout:"vertical",children:(0,n.jsx)(k.Z.Item,{name:"country",label:e("paymentForm.country"),rules:[{required:!0,message:e("paymentForm.address.country.validation")}],children:(0,n.jsx)(K.Z,{value:r,style:{width:"50%"},onChange:s,disabled:!!r,options:o&&Object.keys(o).map(e=>({value:e,label:o[e]}))})})})}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:d,disabled:!r})})]})},eE=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.appUrl),s=async()=>{let n=(0,f.zp)(t,r).UNIONPAY,a=await (0,v.Eo)(),s=()=>j.wR.initialize({token:t,...n,clientSession:a}),i=e=>{(0,y.J0)(e.url,e.parameters,"unionpay").submit()};(0,g.Y3)(s,{onSuccess:i,translation:e}).then(S.noop)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.UNIONPAY"),content:e("paymentMethods.UNIONPAY.headline"),informationUrl:"https://www.unionpayintl.com/"}),(0,n.jsx)(N,{texts:e("paymentMethods.UNIONPAY.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:s})})]})},eN=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.appUrl),s=async()=>{let n=(0,f.zp)(t,r).SAMANBANK,a=await (0,v.Eo)(),s=()=>j.BL.initialize2({token:t,...n,clientSession:a}),i=e=>{(0,y.J0)(e.url,e.parameters,"samanbank").submit()};(0,g.Y3)(s,{onSuccess:i,translation:e}).then(S.noop)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.SAMANBANK"),content:e("paymentMethods.SAMANBANK.headline"),informationUrl:"https://cbr.ir/"}),(0,n.jsx)(N,{texts:e("paymentMethods.SAMANBANK.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:s})})]})},eI=()=>{let e=(0,i.Z)(),t=e&&e("paymentMethods.IATAPAY.countries"),[r,s]=(0,m.useState)(),l=a.SF.useState(e=>e.token),o=a.SF.useState(e=>e.appUrl),d=a.SF.useState(e=>e.inquiry);(0,m.useEffect)(()=>{if(window.addEventListener("iatapayMessage",c),(null==d?void 0:d.currency)!="EUR")switch(null==d?void 0:d.currency){case"INR":s("IN");break;case"GBP":s("GB");break;case"HKD":s("HK");break;case"THB":s("TH");break;case"BRL":s("BR");break;case"MXN":s("MX")}},[]);let c=async t=>{let r=await (0,v.Eo)();(0,g.Y3)(()=>j.C3.complete7({token:l,clientSession:r}),{translation:e})},p=async()=>{let t=(0,f.zp)(l,o).IATAPAY,n=await (0,v.Eo)();(0,g.Y3)(()=>j.C3.initialize7({token:l,...t,locale:"tr",country:r,clientSession:n}),{onSuccess:h,translation:e}).then(S.noop)},h=async t=>{t.iataPaymentId?checkout({iataPaymentId:t.iataPaymentId}):(0,a.ow)("error",{title:e("errors.generic.title"),subtitle:e("errors.generic.subtitle")})};return(0,n.jsxs)(x.Z,{children:[(0,n.jsxs)(C.Z,{direction:"vertical",children:[(0,n.jsx)(F,{title:e("paymentGroups.IATAPAY"),content:e("paymentMethods.IATAPAY.headline")}),e("paymentMethods.IATAPAY.notices").map((e,t)=>(0,n.jsx)(Z,{text:e},t))]}),(0,n.jsx)(u.Z,{xs:22,offset:2,children:(null==d?void 0:d.currency)=="EUR"&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(k.Z,{layout:"vertical",children:(0,n.jsx)(k.Z.Item,{name:"country",label:e("paymentForm.country"),rules:[{required:!0,message:e("paymentForm.address.country.validation")}],children:(0,n.jsx)(K.Z,{value:r,style:{width:"50%"},onChange:s,options:t&&Object.keys(t).map(e=>({value:e,label:t[e]}))})})})})}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:p,disabled:!r})})]})},eT=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.inquiry),r=a.SF.useState(e=>e.token),s=a.SF.useState(e=>e.clientSession),l=async()=>{console.log("handleclick");let n={countryCode:t.originCountry,currencyCode:t.currency,merchantCapabilities:["supports3DS"],supportedNetworks:["visa","mastercard","maestro","amex"],total:{label:e("summary.total"),type:"final",amount:t.amount.toString()}};console.log(n);let i=new ApplePaySession(6,n);i.onvalidatemerchant=function(){console.log("validate merchant"),(0,g.Y3)(()=>j.EL.initialize11({token:r,clientSession:s}),{onSuccess:e=>{i.completeMerchantValidation(e)},translation:e}).then(S.noop)},i.onpaymentauthorized=function(t){let n=t.payment.token,l={data:n.paymentData.data,publicKeyHash:n.paymentData.header.publicKeyHash,ephemeralPublicKey:n.paymentData.header.ephemeralPublicKey,signature:n.paymentData.signature||n.paymentData.sigature,version:n.paymentData.version,transactionId:n.transactionIdentifier||n.paymentData.header.transactionId};console.log("paymentToken",n),console.log("parameters",l);let o=e=>{i.completePayment({status:ApplePaySession.STATUS_SUCCESS}),setTimeout(()=>{(0,a.ow)("success",{url:null==e?void 0:e.redirectionUrl,data:e})},1e3)};(0,g.Y3)(()=>j.EL.complete11({token:r,clientSession:s,parameters:l}),{translation:e,onSuccess:o})},i.oncancel=function(){let t=()=>j._q.cancel(r);(0,g.Y3)(()=>j.EL.failure7({token:r}),{onSuccess:t,onFailure:t,translation:e})},i.begin()};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.APPLE_PAY"),content:e("paymentMethods.APPLE_PAY.headline"),informationUrl:"https://www.knetpay.com.kw/"}),(0,n.jsx)(N,{texts:e("paymentMethods.APPLE_PAY.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:l})})]})},ek=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.clientSession),s=a.SF.useState(e=>e.inquiry),[l,o]=(0,m.useState)(),d=Object.assign({},{type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY"],allowedCardNetworks:["AMEX","MASTERCARD","VISA"]}},{tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"worldpay",gatewayMerchantId:"3d069a51f9b9a1e"}}});(0,m.useEffect)(()=>{o(new google.payments.api.PaymentsClient({environment:"TEST",paymentDataCallbacks:{onPaymentAuthorized:p}}))},[]);let c=async()=>{let n=()=>j.FJ.initialize8({token:t,clientSession:r}),i=()=>{let r=function(){let e=Object.assign({},{apiVersion:2,apiVersionMinor:0});return e.allowedPaymentMethods=[d],e.merchantInfo={merchantName:"TK"},e.callbackIntents=["PAYMENT_AUTHORIZATION"],e}();r.transactionInfo={countryCode:s.originCountry,currencyCode:s.currency,totalPriceStatus:"FINAL",totalPrice:s.amount.toString(),totalPriceLabel:e("summary.total")},null==l||l.loadPaymentData(r).then(e=>{console.log("loadPaymentData completed",e)}).catch(e=>{j.FJ.failure5({token:t}),console.error("gpay error",e),(0,a.K4)(!1)})};(0,g.Y3)(n,{onSuccess:i,translation:e}).then(S.noop)},p=n=>{let s;try{s=JSON.parse(n.paymentMethodData.tokenizationData.token)}catch(e){console.warn("error occurred while parsing token",e),s={}}return new Promise(async function(n){j.FJ.complete8({token:t,parameters:s,clientSession:r}).then(function(e){var t;n({transactionState:"SUCCESS"}),(0,a.ow)("success",{url:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.redirectionUrl,data:e.data})}).catch(function(){n({transactionState:"ERROR",error:{intent:"PAYMENT_AUTHORIZATION",message:e("paymentMethods.GOOGLE_PAY.error"),reason:"PAYMENT_DATA_INVALID"}})})})};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.GOOGLE_PAY"),content:e("paymentMethods.GOOGLE_PAY.headline"),informationUrl:"https://www.knetpay.com.kw/"}),(0,n.jsx)(N,{texts:e("paymentMethods.GOOGLE_PAY.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:c})})]})};var eP=r(29924);let eM=e=>{let{selectedCard:t,form:r}=e,[s,l]=(0,m.useState)(!1),{isMobile:o,isIos:d}=W(),c=(0,i.Z)(),p=new Date().getFullYear()-2e3;(0,m.useEffect)(()=>{let e=L(t.card.cardNumber);(0,a.ow)("creditCard.isAmex",e),l(e)},[]);let h=e=>{var t;o&&(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.id)&&window.scrollTo({top:function(e){var t,r=(null===(t=document.getElementsByClassName("summary")[0])||void 0===t?void 0:t.clientTop)||0;if(null==e?void 0:e.offsetParent){do r+=e.offsetTop-30;while(e=e.offsetParent);return[r]}}(document.getElementById(e.target.id)),behavior:"smooth"})};return(0,n.jsx)("div",{style:{borderWidth:"2px",borderStyle:"solid",borderColor:"#d9d9d9",borderRadius:"4px",padding:"10px"},children:(0,n.jsx)(k.Z,{form:r,name:"creditCardForm1",scrollToFirstError:!0,layout:"vertical",onFocusCapture:e=>d?S.noop:h(e),children:(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(u.Z,{xs:12,md:24,className:" ant-form-item-label ",children:(0,n.jsx)("label",{className:"ant-form-item-required",children:c("paymentForm.creditCard.expiryDate.label")})}),(0,n.jsx)(u.Z,{xs:6,md:11,children:(0,n.jsx)(k.Z.Item,{name:"expireMonth",wrapperCol:{xs:22},rules:[{required:!0,message:c("paymentForm.creditCard.expiryDate.validation")},{validator:(e,t)=>p===parseInt(r.getFieldValue("expireYear"))&&r.getFieldValue("expireMonth")<=X()().month()?Promise.reject(c("paymentForm.creditCard.expiryDate.validation")):Promise.resolve()}],children:(0,n.jsx)(J,{isMobile:o,form:r,name:"expireMonth",options:[...Array(12).keys()].map(e=>(e+1).toString().padStart(2,"0"))})})}),(0,n.jsx)(u.Z,{xs:6,md:11,children:(0,n.jsx)(k.Z.Item,{name:"expireYear",wrapperCol:{xs:22},rules:[{required:!0,message:c("paymentForm.creditCard.expiryDate.validation")},{validator:(e,t)=>p===parseInt(r.getFieldValue("expireYear"))&&r.getFieldValue("expireMonth")<=X()().month()?Promise.reject(c("paymentForm.creditCard.expiryDate.validation")):Promise.resolve()}],children:(0,n.jsx)(J,{isMobile:o,form:r,name:"expireYear",options:[...Array(15).keys()].map(e=>e+p)})})}),(0,n.jsx)(u.Z,{xs:12,md:24,className:" ant-form-item-label ",children:(0,n.jsx)("label",{className:"ant-form-item-required",children:c("paymentForm.creditCard.cvc.label")})}),(0,n.jsx)(u.Z,{xs:12,children:(0,n.jsx)(k.Z.Item,{name:"cvc",rules:[{required:!0,message:c("paymentForm.creditCard.cvc.validation")},{pattern:s?RegExp("[0-9]{4,4}"):RegExp("[0-9]{3,3}"),message:c("paymentForm.creditCard.cvc.validation")}],validateTrigger:"onChange",children:(0,n.jsx)(D.Z,{placeholder:"###",onChange:e=>{var t,n;r.setFieldValue("cvc",(0,y.IZ)(null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(n=t.value)||void 0===n?void 0:n.replace(/ /g,"").trim().substring(0,s?4:3)))},pattern:"[0-9]*",inputMode:"numeric"})})})]})})})},eD=e=>{let{form:t,registeredCard:r,selectedCard:s}=e,l=a.SF.useState(e=>e.token),o=(0,i.Z)(),d=function(e){let t=null==e?void 0:e.split(""),r=(null==e?void 0:e.length)>5?null==e?void 0:e.length:5;t[0]=t[0].toUpperCase(),t[1]=t[1].toUpperCase();for(let e=2;e<r;e++)t[e]="*";return null==t?void 0:t.join("")};return(0,m.useEffect)(()=>{if(s===r){var e,t;let r=null==s?void 0:null===(e=s.card)||void 0===e?void 0:null===(t=e.cardNumber)||void 0===t?void 0:t.substring(0,6);(0,g.Y3)(()=>j.vO.getInstallments({token:l,binNumber:r}),{onSuccess:e=>{(0,a.ow)("milesAndSmilesCardPspId",e.pspId)},onFailure:S.noop,translation:o},!1,!0).then(S.noop).catch(console.error)}},[s]),(0,n.jsxs)(u.Z,{xs:24,lg:12,xl:8,className:"miles-and-smiles-cards",children:[(0,n.jsx)("div",{className:"gutter-row",style:{borderBottomWidth:s===r?"3.5px":"2px",borderBottomColor:s===r?"#1890ff":"#d9d9d9"},children:(0,n.jsx)(eP.ZP,{value:r,style:{padding:"8px 0 8px 3px"},children:(0,n.jsxs)(C.Z,{direction:"vertical",style:{rowGap:"0px"},children:[(0,n.jsxs)("span",{className:"miles-and-smiles-card-owner",children:[d(r.cardHolderInformation.firstName)," \xa0 ",d(r.cardHolderInformation.lastName),r.card.isPrimaryPayment&&(0,n.jsx)("span",{style:{fontSize:"15px",color:"#1890ff"},className:"primary-payment",children:" (Primary payment)"})]}),(0,n.jsx)("span",{className:"miles-and-smiles-card-number",children:function(e){let t=null==e?void 0:e.split(""),r=e.length<16?11:12;for(let e=6;e<r;e++)t[e]="*";return null==t?void 0:t.join("")}(r.card.cardNumber)})]})})}),s===r&&(0,n.jsx)(eM,{selectedCard:s,form:t})]})},eR=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.msRetryableError),s=()=>{(0,g.Y3)(()=>j._q.retry(t),{onSuccess:e=>{(0,a.ow)("inquiry",e),(0,a.ow)("msRetryableError",void 0)},translation:e},!1).then(S.noop)};return r?(0,n.jsx)(ec,{content:e("errors.api.".concat(r,".subtitle")),onConfirm:s,confirmLabel:e("ok")}):(0,n.jsx)(c.Z,{})},eO=e=>{let{form:t,registeredCards:r}=e,s=a.SF.useState(e=>e.token),l=a.SF.useState(e=>e.appUrl),o=a.SF.useState(e=>e.msRetryableError),d=a.SF.useState(e=>e.milesAndSmilesCardPspId),[c,p]=(0,m.useState)(""),[h,b]=(0,m.useState)(!1),[C,F]=(0,m.useState)(),[w,Z]=(0,m.useState)(),[E,N]=(0,m.useState)(),[I,T]=(0,m.useState)(),[P,M]=(0,m.useState)(),[D,R]=(0,m.useState)(),{isMobile:O,isIos:L}=W(),U=(0,i.Z)(),Y=e=>{var t;O&&(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.id)&&window.scrollTo({top:findPosition(document.getElementById(e.target.id)),behavior:"smooth"})},_=e=>{let{target:{value:t}}=e;p(t)},q=e=>{let r=e.target;"radio"===r.type&&c.toString()===r.value.toString()&&(p(""),t.setFieldValue("cvc",null))},K=async e=>{var t;let r={streetAddressA:c.address.streetAddressA,city:c.address.city,state:c.address.state,postalCode:c.address.postalCode,countryCode:c.address.countryCode,countryISO3166numeric:c.address.countryCode};return{card:{cardOwnerName:c.cardHolderInformation.lastName,cardNumber:c.card.cardNumber,expireYear:null===(t=e.expireYear)||void 0===t?void 0:t.toString(),expireMonth:e.expireMonth,cvc:e.cvc},address:r,user:{name:c.cardHolderInformation.firstName,surname:c.cardHolderInformation.lastName,email:c.cardHolderInformation.email,phoneNumber:e.phoneNumber},clientSession:{...await (0,v.Eo)()},installment:0,token:s}},B=async()=>{let e=await K(t.getFieldsValue()),r=(0,f.zp)(s,l).CREDIT_CARD,n={};"WORLDLINE"===d&&(n={pendingUrl:r,errorUrl:r,cancelledUrl:r}),"NUVEI"===d&&(n={pendingUrl:r,errorUrl:r,notificationUrl:r}),(0,g.Y3)(()=>j.zZ.initialize3({...e,successUrl:r,failureUrl:r,threeDSecureParams:n}),{translation:U,onSuccess:t=>{F(e);let r=t.cardSubmission===j.j4.cardSubmission.MANDATORY,n=t.threeDSecureNecessity===j.j4.threeDSecureNecessity.MANDATORY;if(T(r),t.threeDSecureParams){let r=t.threeDSecureParams;if("QNB_Finansbank"===d?r.Pan=e.card.cardNumber:r.pan=e.card.cardNumber,"Amex"===d&&(delete r.DisplayMode,r.ProcessingMode="MPIOnly"),"WORLDLINE"===d&&!r.redirectUrl||"NUVEI"===d&&(t.channelUrl=r.acsUrl,"false"===r.v2supported||"frictionless"===r.method||"exemption"===r.method)){N(ee.pJ.NOT_ALLOWED),R(t.cardToken);return}Z((0,y.J0)(t.channelUrl,r,"threeDForm")),N(n?ee.pJ.REQUIRED:ee.pJ.OPTIONAL)}else E==ee.pJ.NOT_ALLOWED&&b(e=>!e),N(ee.pJ.NOT_ALLOWED);R(t.cardToken)}},!1,!0).then(S.noop)},G=async()=>{await t.validateFields(),B().then(S.noop)},V=()=>{let e={...C};if(e.card.cardNumber=D,E===ee.pJ.REQUIRED){(0,a.K4)(!0),(0,ee.L0)(e),null==w||w.submit();return}(0,g.Y3)(()=>j.AD.auth({...e}),{translation:U},!1,!0).then(S.noop)};return(0,m.useEffect)(()=>{if(console.log(I,E),void 0!==I&&void 0!==E&&!0!==I){if(E===ee.pJ.OPTIONAL){M(!0);return}V()}},[I,E,h]),(0,m.useEffect)(()=>{o&&t.resetFields(["expireMonth","expireYear","cvc"])},[o]),(0,n.jsxs)("div",{onClick:q,style:{marginTop:"20px"},className:"miles-and-smiles-cards-container",children:[(0,n.jsx)(k.Z,{form:t,name:"creditCardForm",scrollToFirstError:!0,layout:"vertical",onFocusCapture:e=>L?S.noop:Y(e),children:(0,n.jsx)(eP.ZP.Group,{style:{width:"100%"},onChange:_,value:c,children:(0,n.jsx)(x.Z,{style:{marginTop:"15px"},gutter:[{md:8},{xs:8,sm:8,md:16}],children:r.map((e,r)=>(0,n.jsx)(eD,{form:t,registeredCard:e,selectedCard:c,index:r},r))})})}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{onClick:G,disabled:""===c})}),I&&(0,n.jsx)(et,{onConfirm:()=>T(!1)}),P&&(0,n.jsx)(em,{onCancel:()=>{N(ee.pJ.NOT_ALLOWED),M(!1)},onConfirm:()=>{N(ee.pJ.REQUIRED),M(!1)}}),(0,n.jsx)(eR,{})]})};r(8431);let eL=()=>{let e=(0,i.Z)(),[t]=k.Z.useForm(),r=a.SF.useState(e=>e.milesAndSmilesRegisteredCards);return(0,n.jsx)(n.Fragment,{children:(null==r?void 0:r.length)>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{children:(0,n.jsxs)(C.Z,{size:"middle",direction:"vertical",children:[(0,n.jsx)(u.Z,{xs:24,className:"payment-method-content-title",children:e("paymentGroups.MILES_AND_SMILES_CARDS")}),(0,n.jsx)(u.Z,{xs:24,className:"notice",children:e("paymentMethods.MILES_AND_SMILES_CARDS.headline")})]})}),(0,n.jsx)(eO,{form:t,registeredCards:r})]})})};var eU=r(13448),eY=e=>{let{form:t}=e,r=(0,i.Z)();return(0,n.jsxs)(x.Z,{gutter:{xs:0,lg:10},children:[(0,n.jsx)(u.Z,{xs:24,lg:12,children:(0,n.jsx)(k.Z.Item,{name:"cardNumber",required:!0,wrapperCol:{xs:24},label:r("paymentForm.giftCard.cardNumber.label"),rules:[{type:"string",message:r("paymentForm.giftCard.cardNumber.validation"),validateTrigger:"onSubmit"},{required:!0,message:r("paymentForm.giftCard.cardNumber.validation"),validateTrigger:"onSubmit"}],children:(0,n.jsx)(D.Z,{})})}),(0,n.jsx)(u.Z,{xs:24,lg:9,children:(0,n.jsx)(k.Z.Item,{name:"pin",required:!0,wrapperCol:{xs:24},label:r("paymentForm.giftCard.pin.label"),rules:[{type:"string",message:r("paymentForm.giftCard.pin.validation"),validateTrigger:"onSubmit"},{required:!0,message:r("paymentForm.giftCard.cardNumber.validation"),validateTrigger:"onSubmit"}],children:(0,n.jsx)(D.Z,{})})}),(0,n.jsx)(u.Z,{xs:24,lg:3,style:{alignSelf:"center",marginTop:7},children:(0,n.jsx)(b.Z,{type:"primary",block:!0,onClick:t.submit,children:"Ekle"})})]})};let e_=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.clientSession),s=a.SF.useState(e=>e.inquiry),[l]=k.Z.useForm(),o=a.SF.useState(e=>e.giftCard),d=a.SF.useState(e=>e.remainingAmountDueToGiftCard),c=r=>{let n=t=>{if(t.currency!==s.currency){eU.Z.error({message:e("errors.common.currencyNotMatch")}),(0,a.K4)(!1);return}if(0===t.balance){eU.Z.error({message:e("errors.common.paymentNotBalance",{$cardName:"Gift Card"})}),(0,a.K4)(!1);return}let n=t.balance>=s.amount;(0,a.ow)("giftCardMultiPay",n),(0,a.ow)("giftCard",{...t,pin:r.pin}),(0,a.ow)("remainingAmountDueToGiftCard",n?0:s.amount-t.balance),(0,a.K4)(!1)},i=t=>{var r,n;let a=e("errors.api.".concat((null==t?void 0:null===(r=t.body)||void 0===r?void 0:null===(n=r.error)||void 0===n?void 0:n.code)||"default"));l.setFields([{name:"cardNumber",errors:[null==a?void 0:a.subtitle]}])};(0,g.Y3)(()=>j.CG.query1({token:t,cardNumber:r.cardNumber,pin:r.pin}),{onSuccess:n,translation:e,onFailure:i}).then(S.noop)},m=()=>{let n={token:t,clientSession:r,cardNumber:o.cardNumber,pin:o.pin};eg(n,e)};return(0,n.jsxs)(x.Z,{children:[(0,n.jsx)(F,{title:e("paymentGroups.GIFT_CARD")}),(0,n.jsxs)(k.Z,{form:l,onFinish:c,layout:"vertical",children:[(0,n.jsx)(ev,{remainingAmountDueToGiftCard:d}),d>0&&(0,n.jsx)(u.Z,{xs:24,style:{marginTop:20},children:(0,n.jsx)("h4",{children:e("paymentMethods.GIFT_CARD.remainingAmountInfo")})}),!o&&(0,n.jsx)(eY,{form:l}),(0,n.jsx)(N,{texts:e("paymentMethods.GIFT_CARD.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{disabled:!o||d>0,onClick:m})})]})]})};var eq=r(56471);let eK=e=>{let{onConfirm:t}=e,r=(0,i.Z)(),s=a.SF.useState(e=>e.retryableError);return(0,n.jsx)(ec,{content:r(void 0===s?"paymentForm.wallet.subtitle":"errors.api.${retryableError}.subtitle"),onConfirm:t})},eB=e=>{let{onComplete:t}=e,[r]=k.Z.useForm(),s=(0,i.Z)(),l=a.SF.useState(e=>e.inquiry),o=a.SF.useState(e=>e.token),c=a.SF.useState(e=>{var t;return null==e?void 0:null===(t=e.inquiry)||void 0===t?void 0:t.language}),[p,h]=(0,m.useState)(),y=a.SF.useState(e=>e.retryableError),[v,f]=(0,m.useState)(10),[A,C]=(0,m.useState)(10),F=a.SF.useState(e=>{var t;return null==e?void 0:null===(t=e.inquiry)||void 0===t?void 0:t.originCountry}),{data:w}=es(()=>j.CR.getCountries(c));(0,m.useEffect)(()=>{l&&r.setFields([{name:"phoneNumberCountryCode",value:"90"},{name:"currency",value:l.currency}])},[l]),(0,m.useEffect)(()=>{h(!1)},[y]);let Z=e=>{let r=e.phoneNumberCountryCode.value;(0,g.Y3)(()=>j.UV.createWallet({token:o,phoneNumberCountryCode:r||"90",phoneNumber:e.phoneNumber,currency:e.currency}),{onSuccess:t,onFailure:E,translation:s}).then(S.noop)},E=e=>{var t,r,n,s;if((null==e?void 0:null===(t=e.body)||void 0===t?void 0:null===(r=t.error)||void 0===r?void 0:r.code.toString())!==null){let t=null==e?void 0:null===(n=e.body)||void 0===n?void 0:null===(s=n.error)||void 0===s?void 0:s.code.toString();void 0!==t?(0,a.ow)("retryableError",t):(0,a.ow)("retryableError",void 0),h(!0);return}},N=e=>{"90"===e.value?(f(10),C(10)):(f(7),C(15)),r.validateFields().then(S.noop)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.Z,{form:r,onFinish:Z,scrollToFirstError:!0,layout:"vertical",children:(0,n.jsxs)(x.Z,{gutter:{xs:0,sm:5,md:5,lg:10},children:[(0,n.jsx)(u.Z,{xs:24,sm:8,lg:3,children:(0,n.jsx)(k.Z.Item,{name:"phoneNumberCountryCode",wrapperCol:{xs:24},label:s("paymentForm.wallet.labels.code"),rules:[{required:!0,message:s("paymentForm.wallet.validations.required")}],validateTrigger:"onChange",children:(0,n.jsx)(K.Z,{showSearch:!0,labelInValue:!0,className:"selectbox",onChange:N,children:w&&w.map(e=>({...e,name:"TR"!==e.code?new Intl.DisplayNames([c||"en"],{type:"region"}).of(e.code):"T\xfcrkiye"})).sort((e,t)=>F===e.code?-1:F===t.code?1:e.phoneCode.localeCompare(t.phoneCode,void 0,{numeric:!0})).filter((e,t,r)=>t===r.findIndex(t=>t.phoneCode===e.phoneCode)).map(e=>(0,n.jsxs)(K.Z.Option,{value:e.phoneCode,children:[" ",e.phoneCode]},e.id))})})}),(0,n.jsx)(u.Z,{xs:24,sm:16,lg:7,children:(0,n.jsx)(k.Z.Item,{name:"phoneNumber",wrapperCol:{xs:24},label:s("paymentForm.wallet.labels.number"),validateTrigger:"onChange",rules:[{min:v,message:s("paymentForm.wallet.validations.mincharacters")+v},{max:A,message:s("paymentForm.wallet.validations.maxcharacters")+A},{required:!0,message:s("paymentForm.wallet.validations.required")}],children:(0,n.jsx)(D.Z,{type:"number",pattern:"[0-9]*",inputMode:"numeric",value:"123",onKeyDown:e=>["e","E","+","-","."].includes(e.key)&&e.preventDefault()})})}),(0,n.jsx)(u.Z,{xs:24,lg:10,children:(0,n.jsx)(k.Z.Item,{name:"currency",wrapperCol:{xs:24},label:s("paymentForm.wallet.labels.currency"),rules:[{required:!0,message:s("paymentForm.wallet.validations.required")}],validateTrigger:"onChange",children:(0,n.jsx)(K.Z,{labelInValue:!0,className:"selectbox",disabled:!0,options:Object.keys(d._g).map(e=>({value:e,label:d._g[e].label}))})})}),(0,n.jsx)(u.Z,{xs:24,lg:4,style:{alignSelf:"flex-end",marginBottom:25},children:(0,n.jsx)(b.Z,{type:"primary",block:!0,onClick:r.submit,children:s("paymentForm.wallet.labels.create")})}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsxs)("h3",{children:[" ",s("paymentForm.wallet.errors.nowallet")]})})]})}),p&&(0,n.jsx)(eK,{onConfirm:()=>{h(!1)}})]})};var eG=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.wallet),[s,l]=(0,m.useState)(!1),o=[{title:e("paymentForm.wallet.walletAmount"),dataIndex:"totalWallet"},{title:e("paymentForm.wallet.cashbackAmount"),dataIndex:"totalCashback"},{title:e("paymentForm.wallet.creditAmount"),dataIndex:"totalCredit"}];(0,m.useEffect)(()=>{d()},[]);let d=()=>{let r=e=>{(0,a.K4)(!1),l(!1),(0,a.ow)("wallet",e)},n=e=>{var t,r,n,s,i;if(console.error(e,null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.error),(null==e?void 0:null===(r=e.body)||void 0===r?void 0:null===(n=r.error)||void 0===n?void 0:n.code.toString())==="3000"){l(!0);return}(null==e?void 0:null===(s=e.body)||void 0===s?void 0:null===(i=s.error)||void 0===i?void 0:i.code.toString())==="3002"&&(0,a.ow)("walletCurrencyMismatchError",!0)};(0,g.Y3)(()=>j.UV.query({token:t}),{translation:e,onSuccess:r,onFailure:n}).then(S.noop)};return s?(0,n.jsx)(eB,{onComplete:d}):r?(0,n.jsxs)(eq.Z,{children:[(0,n.jsx)("div",{style:{textAlign:"right"},children:(0,n.jsxs)("h3",{children:[e("paymentForm.wallet.walletBalance")," : ",r.walletBalance]})}),(0,n.jsx)(eh.Z,{columns:o,dataSource:[r],size:"middle",pagination:!1,showHeader:!0})]}):(0,n.jsx)(n.Fragment,{})};let eV=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.token),r=a.SF.useState(e=>e.inquiry),s=a.SF.useState(e=>e.clientSession),[l,o]=(0,m.useState)(),c=a.SF.useState(e=>e.creditCard);a.SF.useState(e=>e.remainingAmountDueToWallet);let p=a.SF.useState(e=>e.retryableError),[h]=k.Z.useForm(),y=a.SF.useState(e=>e.wallet),v=y&&y.totalWallet+y.totalCashback>=r.amount,f=a.SF.useState(e=>e.walletCurrencyMismatchError),{invokable:{makeInitRequest:b,makeThreeDSecureValidation:C},tdsStatus:w,setTdsStatus:Z}=ej();(0,m.useEffect)(()=>{if(w){if(w===ee.pJ.OPTIONAL){o(!0);return}E()}},[w]),(0,m.useEffect)(()=>{p&&h.resetFields(["cardNumber","expireMonth","expireYear","cvc","country","streetAddressA"])},[p]);let E=()=>{let t;let r=d.A6.WALLET;t={cardNumber:y.cardNumber,pin:y.pin};let n=C(r,t);w===ee.pJ.NOT_ALLOWED&&(0,g.Y3)(()=>j.UV.topUpAndPay(n.request),{translation:e}).then(S.noop)},I=async()=>{if(v){(0,g.Y3)(()=>j.UV.pay({token:t,clientSession:s}),{translation:e}).then(S.noop);return}b(h).then(S.noop)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{children:(0,n.jsxs)(u.Z,{xs:24,children:[(0,n.jsx)(F,{title:e("paymentGroups.WALLET")}),(0,n.jsx)(eG,{}),(0,n.jsxs)(k.Z,{form:h,name:"walletPaymentForm",layout:"vertical",wrapperCol:{xs:{span:18},sm:{span:18}},onFinish:I,children:[y&&!v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{children:(0,n.jsx)("div",{className:"payment-method-content-subtitle",children:e("paymentForm.cardOwner.caption")})})}),(0,n.jsxs)(x.Z,{gutter:{xs:0,lg:60},children:[(0,n.jsx)(q,{form:h}),(0,n.jsx)($,{form:h,cardAmount:y.totalCredit,cvcRequired:!1,setCvcRequired:void 0})]}),(0,n.jsx)(x.Z,{gutter:{xs:0,lg:60},children:c.addressRequired&&(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(el,{form:h})})})]}),f?(0,n.jsx)(N,{texts:[e("paymentForm.wallet.errors.currency")]}):(0,n.jsx)(N,{texts:e("paymentMethods.WALLET.notices")}),(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(A,{disabled:f||!y,onClick:h.submit})})]})]})}),l&&(0,n.jsx)(em,{onCancel:()=>{Z(ee.pJ.NOT_ALLOWED),o(!1)},onConfirm:()=>{Z(ee.pJ.REQUIRED),o(!1)}}),(0,n.jsx)(eu,{})]})},ez=e=>{let{paymentMethods:t,title:r}=e,s=a.SF.useState(e=>e.selectedPaymentMethod);return l(t)?(0,n.jsx)(c.Z,{}):(0,n.jsxs)(u.Z,{xs:24,className:"payment-method-container",children:[(0,n.jsx)("div",{className:"payment-title",children:r}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"row",flexFlow:"wrap"},children:t.map(e=>(0,n.jsx)(h,{paymentMethod:e},e))}),s&&t.includes(s)&&(0,n.jsxs)("div",{className:"payment-method-content",children:[s===d.A6.ALIPAY&&(0,n.jsx)(I,{}),s===d.A6.BKM_EXPRESS&&(0,n.jsx)(T,{}),s===d.A6.CREDIT_CARD&&(0,n.jsx)(eb,{}),s===d.A6.EFT&&(0,n.jsx)(eA,{}),s===d.A6.IDEAL&&(0,n.jsx)(eC,{}),s===d.A6.KLARNA&&(0,n.jsx)(eF,{}),s===d.A6.KNET&&(0,n.jsx)(ew,{}),s===d.A6.SOFORT&&(0,n.jsx)(eZ,{}),s===d.A6.UNIONPAY&&(0,n.jsx)(eE,{}),s===d.A6.SAMANBANK&&(0,n.jsx)(eN,{}),s===d.A6.IATAPAY&&(0,n.jsx)(eI,{}),s===d.A6.APPLE_PAY&&(0,n.jsx)(eT,{}),s===d.A6.GOOGLE_PAY&&(0,n.jsx)(ek,{}),s===d.A6.MILES_AND_SMILES_CARDS&&(0,n.jsx)(eL,{}),s===d.A6.GIFT_CARD&&(0,n.jsx)(e_,{}),s===d.A6.WALLET&&(0,n.jsx)(eV,{})]})]})},eJ=e=>{var t;let{paymentMethods:r}=e,s=(0,i.Z)(),l=a.SF.useState(e=>e.token),c=a.SF.useState(e=>e.clientSession),[u,p]=(0,m.useState)(o(r,d.dY)),h=(null==u?void 0:u.includes(d.A6.EFT))?s("paymentGroups.bank"):null===(t=s("paymentGroups.bank"))||void 0===t?void 0:t.replace("/ EFT",""),x=async(e,t)=>{(0,g.Y3)(()=>j.PK.getCards({token:e,clientSession:t}),{onSuccess:e=>{e.length>0?(0,a.ow)("milesAndSmilesRegisteredCards",e):p(u.filter(e=>e!==d.A6.MILES_AND_SMILES_CARDS))},onFailure:()=>{p(u.filter(e=>e!==d.A6.MILES_AND_SMILES_CARDS))},translation:s},!1).then(S.noop)};return(0,m.useEffect)(()=>{u.includes(d.A6.MILES_AND_SMILES_CARDS)&&(async()=>{let e=c||await (0,v.Eo)();await x(l,e)})()},[u]),(0,n.jsx)(ez,{paymentMethods:u,title:h})},eW=e=>{let{paymentMethods:t}=e,r=(0,i.Z)(),[a,s]=(0,m.useState)(o(t,d.U3));async function l(){if(!("ApplePaySession"in window))return!1;if(!0===ApplePaySession.canMakePayments())return!0;try{let e=await ApplePaySession.canMakePaymentsWithActiveCard(d.fh);if(e)return!0;let t=await ApplePaySession.openPaymentSetup(d.fh);return!!t}catch(e){return console.error("apple pay canMakePayments error",e),!1}}return(0,m.useEffect)(()=>{a.includes(d.A6.APPLE_PAY)&&l().then(e=>{e||s(a.filter(e=>e!==d.A6.APPLE_PAY))})},[a]),(0,n.jsx)(ez,{paymentMethods:a,title:r("paymentGroups.apm")})},eH=e=>{let{paymentMethod:t}=e,r=(0,i.Z)();return(0,n.jsx)(ez,{paymentMethods:[t],title:r("paymentGroups.".concat(t))})},eX=()=>{let e=(0,i.Z)();return(0,n.jsx)(ez,{paymentMethods:[d.A6.IATAPAY],title:e("paymentGroups.IATAPAY")})},eQ=e=>{let{paymentMethods:t}=e,r=(0,i.Z)(),a=o(t,d.jO);return console.log("act",a),(0,n.jsx)(ez,{paymentMethods:a,title:r("paymentGroups.WALLET")})},e$=e=>{let{paymentMethods:t}=e,r=t.includes(d.A6.IATAPAY),a=t.filter(e=>d.jO.includes(e)),s=t.filter(e=>d.U3.includes(e)),i=s&&s.shift();return(0,n.jsxs)("div",{children:[(0,n.jsx)(eJ,{paymentMethods:t}),(null==a?void 0:a.length)>0&&(0,n.jsx)(eQ,{paymentMethods:t}),r&&(0,n.jsx)(eX,{}),i&&(0,n.jsx)(eH,{paymentMethod:i}),s&&(0,n.jsx)(eW,{paymentMethods:s})]})},e0=()=>{let e=(0,i.Z)(),t=a.SF.useState(e=>e.paymentMethods),r=a.SF.useState(e=>e.defaultRedirectionUrl),l=a.SF.useState(e=>e.redirectionTimeout),c=a.SF.useState(e=>e.giftCard),p=a.SF.useState(e=>e.remainingAmountDueToGiftCard),h=a.SF.useState(e=>e.inquiry),y=()=>{(0,a.ow)("error",{title:e("payment.cancelled.title"),subtitle:e("payment.cancelled.subtitle")})};if((0,m.useEffect)(()=>{t&&1===t.length&&(0,a.ow)("selectedPaymentMethod",t[0])},[t]),(0,m.useEffect)(()=>{c&&p?(console.log("filter!!"),(0,a.ow)("paymentMethods",o(t,d.xt))):(0,a.ow)("paymentMethods",h.paymentMethods)},[c]),"COMPLETED"===h.state){let t=()=>{setTimeout(()=>{(null==h?void 0:h.failureUrl)!=null||(null==h?void 0:h.failureUrl.length)!==0?window.location.href=null==h?void 0:h.failureUrl:window.location.href=r},parseInt(l))};return(0,n.jsx)(s.Z,{title:e("payment.inquiry.error.invalidState.title"),subtitle:e("payment.inquiry.error.invalidState.title"),action:t})}return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"caption",children:e("header")}),(0,n.jsx)(x.Z,{children:(0,n.jsx)(u.Z,{xs:24,children:(0,n.jsx)(e$,{paymentMethods:t})})}),(0,n.jsx)(x.Z,{justify:"end",children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(b.Z,{className:"cancel",type:"text",block:!0,onClick:y,children:e("cancel")})})})]})};var e1=e0},88597:function(e,t,r){r.d(t,{Eo:function(){return o}});var n,a,s=r(48764).Buffer;(n=a||(a={}))[n.mobile=0]="mobile",n[n.desktop=1]="desktop";let i=async()=>({ip:"1.2.3.4",city:"Istanbul",countryCode:"TR",countryName:"Turkey",regionCode:"TR",regionName:"TR"}),l=()=>({os:navigator.platform,deviceType:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)?a.mobile:a.desktop,userAgent:navigator.userAgent,windowSize:"500x600",sessionId:s.from(URL.createObjectURL(new Blob([])).slice(-36)).toString("base64")});async function o(){var e;let t=await i(),r=l();return{ip:t.ip,os:r.os,deviceType:r.deviceType,clientIpCountry:t.countryCode,clientIpCity:t.city,sessionId:r.sessionId,acceptHeader:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*; q=0.8",userAgent:r.userAgent,windowSize:r.windowSize,deviceFingerPrintId:(null===(e=null==localStorage?void 0:localStorage.getItem("deviceFingerPrintId"))||void 0===e?void 0:e.toString())||d()}}let d=()=>{let e=s.from(URL.createObjectURL(new Blob([])).slice(-36)).toString("base64");return localStorage?null==localStorage?void 0:localStorage.setItem("deviceFingerPrintId",e):e}},90481:function(e,t,r){r.d(t,{OJ:function(){return a},SH:function(){return s},Wj:function(){return i},zp:function(){return o}});var n=r(75797);let a=(e,t)=>{e.then(e=>{e.success?(0,n.ow)("success",{url:e.data.redirectionUrl,data:e.data}):console.warn("3derror",error)}).catch(e=>{s(t)}).finally(()=>(0,n.K4)(!1))},s=e=>{console.warn("onCallbackERror"),(0,n.ow)("error",{title:e("payment.failed.title"),subtitle:e("payment.failed.subtitle")}),(0,n.K4)(!1)},i=(e,t,r)=>{if(!e)throw(0,n.ow)("error",{title:r("errors.tokenNotFound.title"),subtitle:r("errors.tokenNotFound.subtitle")}),Error("token is invalid");if(!t)throw s(r),Error("invalid callback")},l={BKM_EXPRESS:"/callback/bkm",KNET:"/callback/apm/knet",IDEAL:"/callback/apm/ideal",SOFORT:"/callback/apm/sofort",ALIPAY:"/callback/apm/alipay",UNIONPAY:"/callback/apm/unionpay",SAMANBANK:"/callback/apm/samanbank",IATAPAY:"/callback/apm/iatapay"},o=(e,t)=>{let r="?token="+e,n="/ok"+r,a="/fail"+r,s={CREDIT_CARD:{successUrl:t+"/callback/3d"+r,failureUrl:t+"/callback/3d/fail"+r}};return Object.keys(l).forEach(e=>{let r=t+l[e];s[e]={successUrl:r+n,failureUrl:r+a}}),s}},16683:function(e,t,r){r.d(t,{Y3:function(){return l}});var n=r(19010),a=r(75797),s=r(64329);let i=["2006","2007","2009"],l=async function(e,t){let{onSuccess:r,onFailure:n,translation:s,silent:i=!1}=t,l=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e)try{var c,u;!1===i&&(0,a.K4)(!0);let t=await e();if(console.warn("myres",t),(null==t?void 0:null===(c=t.data)||void 0===c?void 0:c.success)===!1){d(t.error,s,n,o);return}if(r){r(t.data);return}(0,a.ow)("success",{url:null==t?void 0:null===(u=t.data)||void 0===u?void 0:u.redirectionUrl,data:t.data})}catch(e){d(e,s,n,o),(0,a.K4)(!1)}finally{l||(0,a.K4)(!1)}};function o(e){var t;if((null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.error)&&(null==n?void 0:n.errors.api[e.body.error.code]))return e.body.error.code}function d(e,t,r,n){if(r){r(e);return}let l=o(e);if(console.warn("errorCode",l),l&&i.includes(l.toString())){n?(0,a.ow)("msRetryableError",l):(0,a.ow)("retryableError",l);return}let d=function(e){let t=o(e);return t?"errors.api.".concat(t):"errors.api.default"}(e);(0,a.ow)("error",t(d,sessionStorage.getItem(s.ad)))}}}]);
//# sourceMappingURL=76-2cfb7dff6c8fd77b.js.map